<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aditya Mahajan">
<meta name="dcterms.date" content="2024-02-22">
<meta name="description" content="ECES 506 (Stochastic Control and Decision Theory)">

<title>Course Notes - 37&nbsp; Martingales</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../probability/stochastic-stability.html" rel="next">
<link href="../probability/markov-chains.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/nutshell-1.0.6/nutshell.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script>
// https://github.com/mathjax/MathJax/issues/2744#issuecomment-1658624747
// To fix the bug that uppercase unicode letters are shown in italic
window.MathJax = {
  startup: {
    ready() {
      const {RANGES} = MathJax._.core.MmlTree.OperatorDictionary;
      const {TEXCLASS} = MathJax._.core.MmlTree.MmlNode;
      RANGES.splice(4, 1,
        [0x0370, 0x0385, TEXCLASS.ORD, 'mi'],
        [0x0386, 0x3AB, TEXCLASS.ORD, 'mi', 'normal'],
        [0x03AC, 0x1A20, TEXCLASS.ORD, 'mi']
      );
      MathJax.startup.defaultReady();
    }
  },
  tex: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
    processEscapes: true,
    tags: "ams",
    macros: {
      PR: "\\mathbb{P}",
      EXP: "\\mathbb{E}",
      IND: "\\mathbb{I}",
      ONES: "\\mathbb{1}",
      reals: "\\mathbb{R}",
      integers: "\\mathbb{Z}",
      BLANK: "\\mathfrak{E}",
      TRANS: "\\intercal",
      BELLMAN: "\\mathcal{B}",
      RICCATI: "\\mathcal{R}",
      GAIN: "\\mathcal{G}",
      GREEDY: "\\mathcal{G}",
      MISMATCH: "\\mathcal{D}",
      VEC: "\\operatorname{vec}",
      diag: "\\operatorname{diag}",
      ROWS: "\\operatorname{vec}",
      TR: "\\operatorname{Tr}",   
      SPAN: "\\operatorname{sp}",   
      DRE: "\\operatorname{DRE}",   
      DARE: "\\operatorname{DARE}",   
      LQR: "\\operatorname{LQR}",   
      ALPHABET: ["\\mathcal{#1}", 1],
      MATRIX: ["\\begin{bmatrix} #1 \\end{bmatrix}", 1],
      NORM: ["\\left\\lVert \\mathstrut #1 \\right\\rVert", 1],
      ABS: ["\\left\\lvert \\mathstrut #1 \\right\\rvert", 1],
      GRAD: "\\nabla",
      IP: ["\\left\\langle #1, #2 \\right\\rangle", 2]
    },
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
};
</script>
<script async="" data-id="101261731" src="//static.getclicky.com/js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../stochastic-control/index.html"> 
<span class="menu-text">Stochastic Control</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/adityam/stochastic-control" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../probability/convergence.html">Probability Appendix</a></li><li class="breadcrumb-item"><a href="../probability/martingales.html"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Martingales</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the course</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Stochastic Optimization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stochastic-optimization/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stochastic-optimization/newsvendor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The newsvendor problem</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stochastic-optimization/certainty-equivalence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Certainty equivalence</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stochastic-optimization/interchange.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interchange arguments</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">MDPs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Finite horizon MDPs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/gambling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Optimal gambling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/inventory-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Inventory Management</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/monotone-mdps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Monotonicity of value function and optimal policies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/monotone-examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Examples of monotonicity</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/reward-shaping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Reward Shaping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/optimal-stopping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Optimal stopping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/inf-horizon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Infinite horizon MDPs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/mdp-algorithms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">MDP algorithms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/inventory-management-revisited.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Inventory management (revisted)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/mobile-edge-computing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Service Migration in Mobile edge computing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/computational-complexity-vi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Computational complexity of value interation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/martingale.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Thirfty and equalizing policies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/linear-programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Linear programming formulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/lipschitz-mdps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Lipschitz MDPs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mdps/periodic-mdps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Periodic MDPs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">POMDPs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pomdps/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pomdps/sequential-hypothesis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Sequential hypothesis testing</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Approx DP</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../approx-mdps/approx-DP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Approximate dynamic programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../approx-mdps/policy-loss.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Upper bounds on policy loss</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../approx-mdps/model-approximation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Model approximation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Risk sensitive MDPs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../risk-sensitive/risk-sensitive-utility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Risk Sensitive Utility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../risk-sensitive/risk-sensitive-mdps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Risk Sensitive MDPs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Linear systems</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../linear-systems/lqr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Linear quadratic regulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../linear-systems/large-scale-systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Large scale systems</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">RL</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rl/stochastic-approximation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Stochastic approximation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">Dec-POMDPs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dec-pomdps/designers-approach.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Designer’s Approach</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">Probability Appendix</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability/convergence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Convergence of random variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability/sub-gaussian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Sub-Gaussian random variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability/change-of-measure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Change of Measure</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability/IPM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Integral Probablity Metrics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability/markov-chains.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Markov chains</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability/martingales.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Martingales</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability/stochastic-stability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Stochastic stability</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
 <span class="menu-text">Linear Algebra Appendix</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../linear-algebra/matrix-relationships.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Some useful matrix relationships</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../linear-algebra/positive-definite-matrix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Positive definite matrices</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../linear-algebra/infinite-product-of-matrices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Infinite product of matrices</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../linear-algebra/svd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Singular value decomposition</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../linear-algebra/rkhs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Reproducing Kernel Hilbert Space</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
 <span class="menu-text">Convexity Appendix</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../convexity/convexity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Convex sets and convex functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../convexity/duality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Duality</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true">
 <span class="menu-text">Assignments</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment 2</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#examples-and-immediate-properties" id="toc-examples-and-immediate-properties" class="nav-link active" data-scroll-target="#examples-and-immediate-properties"><span class="header-section-number">37.1</span> Examples and Immediate Properties</a></li>
  <li><a href="#doobs-decomposition" id="toc-doobs-decomposition" class="nav-link" data-scroll-target="#doobs-decomposition"><span class="header-section-number">37.2</span> Doob’s decomposition</a></li>
  <li><a href="#martingale-inequalities" id="toc-martingale-inequalities" class="nav-link" data-scroll-target="#martingale-inequalities"><span class="header-section-number">37.3</span> Martingale Inequalities</a>
  <ul class="collapse">
  <li><a href="#burkholders-inequality" id="toc-burkholders-inequality" class="nav-link" data-scroll-target="#burkholders-inequality">Burkholder’s inequality</a></li>
  <li><a href="#lenglart-inequality" id="toc-lenglart-inequality" class="nav-link" data-scroll-target="#lenglart-inequality">Lenglart inequality</a></li>
  </ul></li>
  <li><a href="#convergence-of-nonnegative-supermartingales" id="toc-convergence-of-nonnegative-supermartingales" class="nav-link" data-scroll-target="#convergence-of-nonnegative-supermartingales"><span class="header-section-number">37.4</span> Convergence of nonnegative supermartingales</a></li>
  <li><a href="#convergence-of-submartingales" id="toc-convergence-of-submartingales" class="nav-link" data-scroll-target="#convergence-of-submartingales"><span class="header-section-number">37.5</span> Convergence of submartingales</a></li>
  <li><a href="#square-integrable-martingales" id="toc-square-integrable-martingales" class="nav-link" data-scroll-target="#square-integrable-martingales"><span class="header-section-number">37.6</span> Square integrable martingales</a></li>
  <li><a href="#strong-law-of-large-number-for-martingale-difference-sequence" id="toc-strong-law-of-large-number-for-martingale-difference-sequence" class="nav-link" data-scroll-target="#strong-law-of-large-number-for-martingale-difference-sequence"><span class="header-section-number">37.7</span> Strong law of large number for martingale difference sequence</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  <li><a href="#notes" id="toc-notes" class="nav-link" data-scroll-target="#notes">Notes</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/adityam/stochastic-control/edit/quarto/probability/martingales.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../probability/convergence.html">Probability Appendix</a></li><li class="breadcrumb-item"><a href="../probability/martingales.html"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Martingales</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Martingales</span></h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="http://www.cim.mcgill.ca/~adityam">Aditya Mahajan</a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="http://www.mcgill.ca/ece">
            McGill University
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Updated</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 22, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Consider a probability space <span class="math inline">\((Ω, \mathcal F, P)\)</span>. We define a few key terms:</p>
<ol type="1">
<li><p>A <strong>filteration</strong> <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> is an increasing familty of sub-sigma-fields of <span class="math inline">\(\mathcal F\)</span>, i.e., for any <span class="math inline">\(t_1 &lt; t_2\)</span>, <span class="math inline">\(\mathcal F_{t_1} \subseteq \mathcal F_{t_2}\)</span>.</p></li>
<li><p>The most common way of generating a filtration is through a stochastic process. In particular, given a stochastic process <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span>, the filtration <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> given by <span class="math display">\[
  \mathcal F_t = σ(X_{1:t}), \quad t \ge 1
\]</span> is called the <strong>filtration generated by <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span></strong> or the <strong>natural filtration</strong> of <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span>.</p></li>
<li><p>A family of integrable random variables <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is said to be <strong>adapted</strong> with respect to the filtration <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> if <span class="math inline">\(X_t\)</span> is <span class="math inline">\(\mathcal F_t\)</span>-measurable for each <span class="math inline">\(t\)</span>.</p></li>
<li><p>A family of integrable random variables <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is said to be <strong>predictable</strong> with respect to the filtration <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> if <span class="math inline">\(X_t\)</span> is <span class="math inline">\(\mathcal F_{t-1}\)</span>-measurable for each <span class="math inline">\(t\)</span>.</p></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Intuition
</div>
</div>
<div class="callout-body-container callout-body">
<p>Intuitively, a process <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is adapted with respect to the filtration <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> the value of <span class="math inline">\(X_t\)</span> is fully known at time <span class="math inline">\(t\)</span> based on the information <span class="math inline">\(\mathcal F_t\)</span>.</p>
</div>
</div>
<div id="def-martingale" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 37.1</strong></span> A family of integrable random vabiables <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> adapted to a filtration <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> is said to be a <strong>martingale</strong> if <span class="math display">\[\begin{equation}\label{eq:martingale}
  X_s = \EXP[X_{t} \mid \mathcal F_s], \quad \forall s &lt; t.
\end{equation}\]</span></p>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Intuition
</div>
</div>
<div class="callout-body-container callout-body">
<p>Property \eqref{eq:martingale} has the interpretation that <span class="math inline">\(X_s\)</span> is the best predictor for <span class="math inline">\(X_t\)</span> based on the information available at time <span class="math inline">\(s\)</span>.</p>
<p>The condition <span class="math inline">\(\EXP[X_{t+1} \mid \mathcal F_t] = X_t\)</span> may be thought of as a “fair-game” requirement. If we are playing a fair game, then we expect neither to win nor to lose moeny on average. Given the history of our fortunes up to time <span class="math inline">\(s\)</span>, our expected fortune <span class="math inline">\(X_{t}\)</span> at a future time <span class="math inline">\(t\)</span> should just be the fortune <span class="math inline">\(X_s\)</span> that we have at time <span class="math inline">\(s\)</span>.</p>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remark
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the definition of a martingale (and its variants that we will define below), it is assumed that the random variables <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> are indegrable, i.e., <span class="math inline">\(\EXP[|X_t|] &lt; ∞\)</span> for all <span class="math inline">\(t\)</span>. Therefore, the conditional expectations used in the definitions are well defined.</p>
</div>
</div>
<p>Several desirable properties of martingales are shared by families of random variables for which \eqref{eq:martingale} is replaced by an inequality.</p>
<ol type="1">
<li><p>A family of integrable random variables <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> adapted to a filtration <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> is said to be a <strong>submartingale</strong> if <span class="math display">\[\begin{equation}\label{eq:submartingale}
X_s \le \EXP[X_{t} \mid \mathcal F_s], \quad \forall s &lt; t.
  \end{equation}\]</span></p></li>
<li><p>A family of integrable random variables <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> adapted to a filtration <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> is said to be a <strong>supermartingale</strong> if <span class="math display">\[\begin{equation}\label{eq:supermartingale}
X_s \ge \EXP[X_{t} \mid \mathcal F_s], \quad \forall s &lt; t.
  \end{equation}\]</span></p></li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A note about the names
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note the definitions of the inequalities: <span class="math display">\[\begin{alignat*}{2}
  \text{supermartingale:} &amp;\quad &amp; X_t &amp;\ge \EXP[X_t \mid \mathcal F_t] \\
  \text{submartingale:}   &amp;\quad&amp; X_t &amp;\le \EXP[X_t \mid \mathcal F_t]
\end{alignat*}\]</span> Thus, at each time, a <em>sub</em>martingale is <em>below</em> its future expected value, whereas a <em>supermartingale</em> is <em>above</em> its future expected value.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remark
</div>
</div>
<div class="callout-body-container callout-body">
<p>If <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is a submartingale, then <span class="math inline">\(\{-X_t\}_{t \ge 1}\)</span> is a supermartingale. This property allows us to translate results between submartingales and supermartingales.</p>
</div>
</div>
<section id="examples-and-immediate-properties" class="level2" data-number="37.1">
<h2 data-number="37.1" class="anchored" data-anchor-id="examples-and-immediate-properties"><span class="header-section-number">37.1</span> Examples and Immediate Properties</h2>
<ol type="1">
<li><p><strong>Martingales generalize the theory of sums of independent random variables.</strong> Let <span class="math inline">\(ξ_1, ξ_2, \dots\)</span> be indepdent, integrable random variables. Define <span class="math inline">\(X_0 = 0\)</span> and <span class="math inline">\(X_t = ξ_1 + \dots + ξ_t\)</span>. If <span class="math inline">\(\EXP[X_t] = 0\)</span> for <span class="math inline">\(t \ge 1\)</span>, then the sequence <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is a martingale with respect to the natural filtration: <span class="math display">\[
\EXP[X_{t+1} \mid X_{1:t}] = \EXP[X_t + ξ_{t+1} \mid X_{1:t}] = X_t.
\]</span></p>
<p>Similarly, if <span class="math inline">\(ξ_t\)</span> has positive mean, <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is a submartingale, and if <span class="math inline">\(ξ_t\)</span> has negative mean, <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is a supermartingale.</p></li>
<li><p>Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be martingale and let <span class="math inline">\(f\)</span> be a convex function for which each <span class="math inline">\(f(X_t)\)</span> is integrable. Then, a direct application of Jensen’s inequality implies that <span class="math inline">\(\{f(X_t)\}_{t \ge 1}\)</span> is a submartingale.</p></li>
<li><p>A consequence of the previous result is the following. Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be a martingale and <span class="math inline">\(p \ge 1\)</span> be such that <span class="math inline">\(|X_t|^p\)</span> is integrable for all <span class="math inline">\(t\)</span>. Then <span class="math inline">\(\{|X_t|^p\}_{t \ge 1}\)</span> is a submartingale.</p></li>
<li><p>Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be <strong>sub</strong>martingale and let <span class="math inline">\(f\)</span> be a convex <strong>and increasing</strong> function for which each <span class="math inline">\(f(X_t)\)</span> is integrable. Then, <span class="math inline">\(\{f(X_t)\}_{t \ge 1}\)</span> is a submartingale because <span class="math display">\[
   \EXP[ f(X_{t+1}) \mid \mathcal F_t]
   \ge
   f( \EXP[ X_{t+1} \mid \mathcal F_t ])
   \ge
   f(X_t)
\]</span> where the first inequality follows from Jensen’s inequality and the second from the fact that <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is a sub-martingale and <span class="math inline">\(f\)</span> is increasing.</p></li>
<li><p>A consequence of the previous result is the following. Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be a submartingale. Then, for any constant <span class="math inline">\(a\)</span>, <span class="math inline">\(\{(X_t - a)^+\}_{t \ge 1}\)</span> is also a submartingale.</p></li>
<li><p>If <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> and <span class="math inline">\(\{Y_t\}_{t \ge 1}\)</span> are martingales defined on the same family of <span class="math inline">\(σ\)</span>-algebras, then <span class="math inline">\(\{a X_t + b Y_t\}_{t \ge 1}\)</span> is a martingale.</p></li>
<li><p>The previous result holds for supermartingales provided <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> are positive.</p></li>
<li><p>If <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> and <span class="math inline">\(\{Y_t\}_{t \ge 1}\)</span> are supermartingales defined on the same family of <span class="math inline">\(σ\)</span>-algebras, then <span class="math inline">\(\{X_t \wedge Y_t\}_{t \ge 1}\)</span> is a supermartingale.</p></li>
<li><p>Suppose <span class="math inline">\(X\)</span> is an integrable random variable and <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> is a filtration. Define <span class="math inline">\(X_t \coloneqq \EXP[X \mid \mathcal F_t]\)</span>. Then <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is a martingale with respect to the filtration (follows from the smoothing property of conditional expectations).</p></li>
<li><p><strong>Likelihood ratios are martingales.</strong> Suppose <span class="math inline">\(X_1\)</span>, <span class="math inline">\(X_2\)</span>, are independent random variables with density <span class="math inline">\(f\)</span>. Imagine we are considering the alternative hypothesis that these random variables are independent with a different probability density <span class="math inline">\(g\)</span> (but they are <em>really</em> distributed according to the density <span class="math inline">\(f\)</span>). We assume that <span class="math inline">\(f\)</span> and <span class="math inline">\(g\)</span> have the same support. Define the likelihood ratio <span class="math display">\[
  Λ_t = \frac{g(X_1)}{f(X_1)} \dots \frac{g(X_t)}{f(X_t)}.
   \]</span> Then, since <span class="math inline">\(Λ_{t+1} = Λ_t g(X_{t+1})/f(X_{t+1})\)</span>, we have <span class="math display">\[\begin{align*}
   \EXP[Λ_{t+1} \mid X_{1:t}]
   &amp;= Λ_t \EXP\biggl[ \frac{g(X_{t+1})}{f(X_{t+1})} \biggm| X_{1:t} \biggr] \\
   &amp;= Λ_t \EXP\biggl[ \frac{g(X_{t+1})}{f(X_{t+1})} \biggr] \\
   &amp;= Λ_t \int\biggl( \frac{g(x)}{f(x)} \biggr) f(x)dx \\
   &amp;= Λ_t \int g(x)dx \\
   &amp;= Λ_t.
  \end{align*}\]</span> Hence, <span class="math inline">\(\{Λ_t\}_{t \ge 1}\)</span> is a martingale.</p></li>
<li><p>A martingale <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> may be written as a sum of increments: <span class="math inline">\(X_t = X_0 + ξ_1 + \dots + ξ_t\)</span>. The increments <span class="math inline">\(\{ξ_t\}_{t \ge 1}\)</span> are called <strong>martingale differences</strong>. Each <span class="math inline">\(ξ_t\)</span> is integrable and <span class="math inline">\(\EXP[ξ_t \mid \mathcal F_{t-1}] = 0\)</span> for all <span class="math inline">\(t\)</span>.</p></li>
</ol>
</section>
<section id="doobs-decomposition" class="level2" data-number="37.2">
<h2 data-number="37.2" class="anchored" data-anchor-id="doobs-decomposition"><span class="header-section-number">37.2</span> Doob’s decomposition</h2>
<div id="thm-doob-decomposition" class="theorem">
<p><span class="theorem-title"><strong>Theorem 37.1 (Doob’s decomposition)</strong></span> Every sequence <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> of integrable random variables adapted to a filtration <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> can be decomposed into a sum of a martingale and an integrable predictable process, i.e., <span class="math display">\[
    X_t = M_t + A_t
  \]</span> where <span class="math inline">\(\{M_t\}_{t \ge 1}\)</span> is a martingale and <span class="math inline">\(\{A_t\}_{t \ge 1}\)</span> is a predictable process</p>
</div>
<ol type="1">
<li><p><strong>Existence.</strong> We can identify the Doob’s decomposition by defining <span class="math display">\[ M_t = X_0 + \sum_{s=1}^{t}\bigl( X_s - \EXP[ X_s \mid \mathcal F_{s-1} \bigr],\]</span> and <span class="math display">\[A_t = \sum_{s=1}^t \bigl( \EXP[ X_s \mid \mathcal F_{s-1} ] - X_{s-1} \bigr).\]</span></p></li>
<li><p><strong>Uniqueness.</strong> The decomposition is almost surely unique. If <span class="math inline">\(X_t = M'_t + A'_t\)</span> is another decomposition, then <span class="math inline">\(Y_t = M_t - M'_t\)</span> being the difference of martingales is a martingale. But <span class="math inline">\(M_t - M'_t = A_t - A'_t\)</span>, which is a predictable process; combining this with the martingale property of <span class="math inline">\(M_t - M'_t\)</span> implies that <span class="math display">\[
A_t - A'_t = \EXP[ A_t - A'_t \mid \mathcal F_t] =
\EXP[ M_t - M'_t \mid \mathcal F_t ] = M_{t-1} - M'_{t-1} = A_{t-1} - A'_{t-1}.
\]</span> Since <span class="math inline">\(A_0 = A'_0 = 0\)</span>, we get that <span class="math inline">\(A_t = A'_t\)</span> for all <span class="math inline">\(t \ge 1\)</span>.</p></li>
<li><p>A stochastic process <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is a submartingale if and only if its Doob’s decomposition gives a predictable process that is almost surely increasing.</p></li>
<li><p>A stochastic process <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is a supermartingale if and only if its Doob’s decomposition gives a predictable process that is almost surely decreasing</p></li>
</ol>
</section>
<section id="martingale-inequalities" class="level2" data-number="37.3">
<h2 data-number="37.3" class="anchored" data-anchor-id="martingale-inequalities"><span class="header-section-number">37.3</span> Martingale Inequalities</h2>
<section id="burkholders-inequality" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="burkholders-inequality">Burkholder’s inequality</h3>
<p>Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be a martingale and let <span class="math inline">\(\xi_1 = X_1\)</span> and <span class="math inline">\(\xi_t = X_t - X_{t-1}\)</span> be the corresponding martingale difference sequence. The <em>quadratic variation</em> process is defined as <span class="math display">\[
  Q_t \coloneqq \sum_{s = 1}^t \NORM{ξ_s}^2.
\]</span></p>
<div id="prp-Burkholder" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 37.1 (Burkholder’s inequality)</strong></span> For any <span class="math inline">\(p &gt; 1\)</span> be such that <span class="math inline">\(\EXP[|X_t|^p] &lt; ∞\)</span> for all <span class="math inline">\(t\)</span>, there exists positive constants <span class="math inline">\(c_p\)</span> and <span class="math inline">\(C_p\)</span> (depending on <span class="math inline">\(p\)</span> alone) such that <span class="math display">\[
  c_p \EXP\bigl[ Q_t^{p/2} \bigr]
  \le
  \EXP\Bigl[ \sup_{1 \le s \le t} \NORM{X_s}^p \Bigr]
  \le
  C_p \EXP\bigl[ Q_t^{p/2} \bigr]
\]</span></p>
</div>
<p>The inequality is due to <span class="citation" data-cites="Burkholder1966">Burkholder (<a href="../references.html#ref-Burkholder1966" role="doc-biblioref">1966</a>)</span>. See notes of <a href="http://www.stat.yale.edu/~ypng/yale-notes/Burkholder.pdf">David Pollard</a> for an accessible proof based on martingale ideas and <span class="citation" data-cites="Bogdan2022">Bogdan and Więcek (<a href="../references.html#ref-Bogdan2022" role="doc-biblioref">2022</a>)</span> for an elementary proof using Bergman divergence.</p>
</section>
<section id="lenglart-inequality" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="lenglart-inequality">Lenglart inequality</h3>
<div id="prp-Lenglart" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 37.2 (Lenglart inequality)</strong></span> Given a filtration <span class="math inline">\(\{\ALPHABET F_t\}_{t \ge 1}\)</span>, let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be a non-negative adapted process and <span class="math inline">\(\{Y_t\}_{t \ge 1}\)</span> be non-negative non-decreasing predictable process such that for any bounded stopping time <span class="math inline">\(τ\)</span>, we have <span class="math inline">\(\EXP[X_{τ} \mid \ALPHABET F_0] \le \EXP[ Y_{τ} \mid \ALPHABET F_0]\)</span>. Then:</p>
<ul>
<li><p>For all <span class="math inline">\(p \in (0,1)\)</span>, <span class="math display">\[
\EXP\biggl[ \Bigl( \sup_{t \ge 1} X_t \Bigr)^p \Bigm| \ALPHABET F_0 \biggr]
\le
C_p
\EXP\biggl[ \Bigl( \sup_{t \ge 1} Y_t \Bigr)^p \Bigm| \ALPHABET F_0 \biggr],
\]</span> where <span class="math inline">\(C_p = p^{-p}/(1-p)\)</span> and the constant <span class="math inline">\(C_p\)</span> is sharp.</p></li>
<li><p>In addition, if <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is non-decreasing, then we have <span class="math display">\[
\EXP\biggl[ \Bigl( \sup_{t \ge 1} X_t \Bigr)^p \Bigm| \ALPHABET F_0 \biggr]
\le
p^{-p}
\EXP\biggl[ \Bigl( \sup_{t \ge 1} Y_t \Bigr)^p \Bigm| \ALPHABET F_0 \biggr],
\]</span> and the constant <span class="math inline">\(p^{-p}\)</span> is sharp.</p></li>
<li><p>Moreover, for any <span class="math inline">\(c,d &gt; 0\)</span>, we have <span class="math display">\[
\PR\Bigl( \sup_{t \ge 1} X_t &gt; c \Bigm| \ALPHABET F_0 \Bigr)
\le
\frac 1c
\EXP\Bigl[ \sup_{t \ge 1} Y_t \wedge d \Bigm| \ALPHABET F_0 \Bigr]
+
\PR\Bigl( \sup_{t \ge 1} Y_t &gt; d \Bigm| \ALPHABET F_0 \Bigr)
\]</span></p></li>
</ul>
</div>
<p>The result is due to <span class="citation" data-cites="Lenglart1977">Lenglart (<a href="../references.html#ref-Lenglart1977" role="doc-biblioref">1977</a>)</span>. See <span class="citation" data-cites="Geiss2021">Geiss and Scheutzow (<a href="../references.html#ref-Geiss2021" role="doc-biblioref">2021</a>)</span> for the sharpness of the bounds.</p>
</section>
</section>
<section id="convergence-of-nonnegative-supermartingales" class="level2" data-number="37.4">
<h2 data-number="37.4" class="anchored" data-anchor-id="convergence-of-nonnegative-supermartingales"><span class="header-section-number">37.4</span> Convergence of nonnegative supermartingales</h2>
<p>We state certain properties of nonnegative supermartingales without proof. This material is taken from <span class="citation" data-cites="Neveu1975">Neveu (<a href="../references.html#ref-Neveu1975" role="doc-biblioref">1975</a>)</span>.</p>
<ol type="1">
<li><p><strong>Maximal inequality for nonnegative supermartingales.</strong> For every nonnegative supermartingale <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span>, the random variable <span class="math inline">\(\sup_{t \ge 1} X_t\)</span> is a.s.&nbsp;finite on the set <span class="math inline">\(\{X_0 &lt; ∞\}\)</span> and, more precisely, satisfies the following inequality: <span class="math display">\[
  \PR\Bigl( \sup_{t \ge 1} X_t \ge a \Bigm| \mathcal F_t \Bigr)
  \le
  \max\biggl( \frac{X_0}{a}, 1 \biggr)
\]</span></p></li>
<li><p><strong>Doob’s inequalities.</strong> Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be a generalized martingale or a nonnegative submartingale. Then for all <span class="math inline">\(p \in (1,∞)\)</span>, and all <span class="math inline">\(t\)</span>, we have: <span class="math display">\[
\EXP[\ABS{X_t}^p] \le
\EXP\Bigl[ \sup_{1 \le s \le t} \ABS{X_s}^p \Bigr]
\le
\biggl(\frac{p}{p-1}\biggr)^p
\EXP[\ABS{X_t}^p].
  \]</span></p></li>
<li><p><strong>Switching principle for supermartingales.</strong> Given two nonnegative supermartingales <span class="math inline">\(\{X^{(i)}_t\}_{t \ge 1}\)</span>, <span class="math inline">\(i \in \{1, 2\}\)</span>, and a stopping time <span class="math inline">\(τ\)</span> such that <span class="math inline">\(X^{(1)}_{τ} \ge X^{(2)}_{τ}\)</span> on <span class="math inline">\(\{τ &lt; ∞\}\)</span>, the formula <span class="math display">\[
X_t(ω) = \begin{cases}
X^{(1)}_t(ω), &amp; \text{if $t &lt; τ(ω)$} \\
X^{(2)}_t(ω), &amp; \text{if $t \ge τ(ω)$}
\end{cases}
\]</span> defines a new nonnegative supermartingale.</p></li>
<li><p><strong>Supermartingale convergence theorem.</strong> Every nonnegative supermartingale <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> converges almost surely. Furthermore, the limit <span class="math inline">\(X_{∞} = \lim_{t \to ∞} X_t\)</span> satisfies the inequality <span class="math display">\[
  \EXP[ X_{∞} \mid \mathcal F_t] \le X_t.
\]</span></p></li>
<li><p>A nonnegative supermartingale converges in <span class="math inline">\(\mathcal L^1\)</span> to its limit <span class="math inline">\(X_{∞}\)</span> if and only if <span class="math inline">\(\EXP[X_t] \to \EXP[X_{∞}]\)</span>.</p></li>
<li><p>For a nonnegative supermartingale <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> and a stopping time <span class="math inline">\(τ\)</span>, the sequence <span class="math inline">\(\{X_{τ \wedge t}\}_{t \ge 1}\)</span> “stopped at the stopping time <span class="math inline">\(τ\)</span>” is also a non-negative supermartingale.</p></li>
<li><p><strong>Stopping theorem</strong> Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be a nonnegative supermartingale. Then, for any <em>bounded</em> stopping times <span class="math inline">\(τ_1\)</span> and <span class="math inline">\(τ_2\)</span>, we have <span class="math display">\[
X_{τ_1} \ge \EXP[ X_{τ_2} \mid \mathcal F_{τ_1}],
\quad \text{ on } \{τ_1 \le τ_2 \}.
\]</span></p></li>
</ol>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Interpretation of supermartingales
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The following interpretation is taken from <span class="citation" data-cites="Dellacherie1982b">Dellacherie and Meyer (<a href="../references.html#ref-Dellacherie1982b" role="doc-biblioref">1982</a>)</span>.</p>
<p>Suppose the random variable <span class="math inline">\(X_t\)</span> represents a gambler’s fortune at time <span class="math inline">\(t\)</span>. Then his successive gains are presented by the random variable <span class="math inline">\(ξ_t = X_t - X_{t-1}\)</span>. The gambler may be in an arbitrarily complicated casino, where he may choose between all sorts of games, move from one table to another, bet on other player’s fortunes, etc., but it is understood that his decisions are unprophetic, i.e., they can only be taken as functions for the <em>past</em> and not as functions of the future, with the convention that the present, i.e., the game which is in the process of being played, forms part of the future.</p>
<p>The supermartingale inequality <span class="math inline">\(\EXP[ξ_t \mid \ALPHABET F_t] \le 0\)</span> means that, whatever decisions are taken by the gambler just before the <span class="math inline">\(t\)</span>-th game, the <em>average</em> profits from that will be negative. In other words, the game favors the casino—which is what happens in reality! (The martingale equality corresponds to the case of an equitable casino)</p>
<p>Now imagine that the gambler, fearing that he is under the influence of an evil star, confides his fortune to a “luckier” (but still unprophetic) friend and goes out for fresh air and returns at random times <span class="math inline">\(τ_1 &lt;  τ_2 &lt;  \dots\)</span>. The stopping theorem says that <strong>what he observes at these random instances is also a game favorable to the casino</strong> (or merely equitable in case of martingales). In other words, things are no better.</p>
<p>The restriction on the length of the stopping time has the following meaning: suppose the gambler tells his friend to “call me at the first moment <span class="math inline">\(τ_1\)</span> when my gain <span class="math inline">\(X_{τ_1} - X_0\)</span> is positive. Then call me again at time <span class="math inline">\(τ_2\)</span> when my gain <span class="math inline">\(X_{τ_2} - X_{τ_1}\)</span> is positive. And so on” At such moments, mean gain is also positive and hence stopping theorem seems to be contradicted; however, the stopping theorem affirms that the stopping times <span class="math inline">\(τ_1\)</span>, <span class="math inline">\(τ_2\)</span>, etc., are not finite.</p>
</div>
</div>
</div>
<p>The converges result continues to hold for “almost” supermartingales.</p>
<div id="thm-almost-supermartingale" class="theorem">
<p><span class="theorem-title"><strong>Theorem 37.2 (Almost supermartingale convergence theorem)</strong></span> Suppose <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span>, <span class="math inline">\(\{β_t\}_{t \ge 1}\)</span>, <span class="math inline">\(\{Y_t\}_{t \ge 1}\)</span>, <span class="math inline">\(\{Z_t\}_{t \ge 1}\)</span> are nonnegative stochastic processes adapted to some filtration <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> that satisfy <span class="math display">\[\begin{equation}\label{eq:almost-supermartingale}
  \EXP[X_{t+1} \mid \mathcal F_t ] \le
  (1 + β_t) X_t + Y_t - Z_t,
  \quad t \ge 1
\end{equation}\]</span> Define the set <span class="math inline">\(Ω_0\)</span> by <span class="math display">\[
  Ω_0 = \biggl\{ ω : \sum_{t \ge 1} β_t(ω) &lt; ∞ \biggr\}
  \cap
  \biggl\{ ω : \sum_{t \ge 1} Y_t(ω) &lt; ∞ \biggr\}.
\]</span> Then, for all <span class="math inline">\(ω \in Ω_0\)</span>, we have that</p>
<ol type="i">
<li><span class="math inline">\(\lim_{t \to ∞} X_t(ω)\)</span> exists and is finite</li>
<li><span class="math inline">\(\sum_{t \ge 1} Z_t(ω) &lt; ∞\)</span>.</li>
</ol>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The key idea is that we can fiddle with \eqref{eq:almost-supermartingale} to make it a supermartingale. Let <span class="math inline">\(b_t = 1/\prod_{\tau = 1}^{t-1} ( 1 + β_{τ} )\)</span>. Note that <span class="math inline">\(\{b_t\}_{t \ge 1}\)</span> is <span class="math inline">\(\{\mathcal F_t\}_{t \ge 1}\)</span> predictable. Define the nonnegative processes <span class="math inline">\(\{X'_t\}_{t \ge 1}\)</span> <span class="math inline">\(\{Y'_t\}_{t \ge 1}\)</span> and <span class="math inline">\(\{Z'_t\}_{t \ge 1}\)</span>, where <span class="math display">\[
X'_t = b_t X_t,
\quad
Y'_t = b_{t+1} Y_t,
\quad
Z'_t = b_{t+1} Z_t.
\]</span> <span class="math display">\[\begin{align}
    \EXP[X'_{t+1} \mid \mathcal F_t] &amp;=
    b_{t+1} \EXP[ X_{t+1} \mid \mathcal F_t] \notag \\
    &amp;\le b_{t+1}(1 + β_t) X_t + b_{t+1} Y_t  - b_{t+1} Z_t \notag \\
    &amp;= X'_t + Y'_t - Z'_t.
    \label{eq:almost-supermartingale-st-1}
\end{align}\]</span></p>
<p>Define <span class="math display">\[\begin{equation}\label{eq:almost-supermartingale-st-2}
W_t = X'_t - \sum_{s = 1}^{t-1} (Y'_s - Z'_s) .
\end{equation}\]</span> From \eqref{eq:almost-supermartingale-st-1} we have <span class="math display">\[
\EXP[W_{t+1} \mid \mathcal F_t] =
\EXP\biggl[ X'_{t+1} - \sum_{s=1}^t(Y'_s - Z'_s) \biggm| \mathcal F_t \biggr]
\le X_t - \sum_{s=1}^{t-1} (Y'_s - Z'_s)
= W_t.
\]</span> Therefore, <span class="math inline">\(\{W_t\}_{t \ge 1}\)</span> is a supermartingale, but we cannot immediately apply the supermartingale convergence theorem because we don’t know that <span class="math inline">\(W_t\)</span> is bounded from below.</p>
<p>For an arbitrary <span class="math inline">\(a &gt; 0\)</span>, define the stopping time <span class="math inline">\(τ_a = \inf \bigl\{ t : \sum_{s=1}^{t} Y'_s &gt; a \bigr\}\)</span>. Now define the stopped sequence <span class="math display">\[W^{(a)}_t := W_{τ_a \wedge t} =
\begin{cases}
  W_t, &amp; \hbox{if } t \le τ_a \\
  W_{τ_a}, &amp; \hbox{if } t &gt; τ_a
\end{cases},
\quad t \ge 1.\]</span> Note that the stopped sequence satisfies: <span class="math display">\[
\EXP[W^{(a)}_{t+1} \mid \ALPHABET F_t] \stackrel{(a)}=
\begin{cases}
  \EXP[W_{t+1} \mid \ALPHABET F_t] , &amp; \hbox{if } t+1 \le τ_a \\
  W_{τ_a}, &amp; \hbox{if } t + 1 &gt; τ_a
\end{cases}
\stackrel{(b)}\le
\begin{cases}
  W_t, &amp; \hbox{if } t &lt; τ_a \\
  W_{τ_a}, &amp; \hbox{if } t \ge τ_a
\end{cases}
\stackrel{(c)}= W^{(a)}_t,
\]</span> where <span class="math inline">\((a)\)</span> uses the definition of <span class="math inline">\(W^{(a)}_t\)</span> and the fact that <span class="math inline">\(\EXP[W_{τ_a} \mid \ALPHABET F_t] = W_{τ_a}\)</span> since <span class="math inline">\(τ_a \le t\)</span>; <span class="math inline">\((b)\)</span> uses the fact that <span class="math inline">\(\{W_t\}_{t \ge 1}\)</span> is a supermartingale; and <span class="math inline">\((c)\)</span> uses the fact that the two terms coincide when <span class="math inline">\(t = τ_a\)</span>.</p>
<p>Thus, the stopped sequence <span class="math inline">\(\{W^{(a)}_{t}\}_{t \ge 1}\)</span> is a supermartingale. Moreover, it is bounded from below since <span class="math display">\[
W^{(a)}_t = W_{t \wedge τ} \ge - \sum_{s = 1}^{τ \wedge (t-1)} Y_s
\ge -a,\]</span> So, we can think of <span class="math inline">\(W^{(a)}_{t} + a\)</span> as a nonnegative supermartingale. Therefore, by the supermartingale convergence theorem, for any given <span class="math inline">\(a\)</span>, <span class="math inline">\(\lim_{t \to ∞} W^{(a)}_{t}\)</span> exists and is finite a.s.</p>
<p>Now define <span class="math inline">\(Ω^{(a)}\)</span> to be the set <span class="math inline">\(\{ ω : \sum_{t \ge 1} Y_t(ω) &lt; a \}\)</span>. We know that <span class="math inline">\(Y'_t = b_{t+1} Y_t &lt; Y_t\)</span>. So, on the set <span class="math inline">\(Ω^{(a)}\)</span>, <span class="math inline">\(\sum_{t \ge 1} Y'_t(ω) &lt; a\)</span>. Hence, for all <span class="math inline">\(ω \in Ω^{(a)}\)</span>, we have <span class="math inline">\(τ_{a}(ω) = ∞\)</span>. Therefore, <span class="math inline">\(W_t = W^{(a)}_t\)</span> and, by the previous argument, <span class="math inline">\(\{W_t\}_{t \ge 1}\)</span> converges to a finite limit.</p>
<p>By countable additivity, we get that <span class="math inline">\(W_t\)</span> converges to a finite limit for all <span class="math inline">\(a \in \integers\)</span>.</p>
<p><strong>Side remark:</strong> It took me a while to understand why this is the case, so I am including a complete formal argument.</p>
<ol type="1">
<li>Fix an <span class="math inline">\(a\)</span>. We know that on <span class="math inline">\(Ω^{(a)}\)</span>, <span class="math inline">\(W_t\)</span> has a finite limit. Denote that limit by <span class="math inline">\(W_{∞}\)</span>.</li>
<li>For any <span class="math inline">\(ε &gt; 0\)</span>, define the event <span class="math inline">\(\ALPHABET E = \cap_{s = 1}^∞ \cup_{t = s}^∞ |W_t(ω) - W_{∞}(ω)| &gt; ε\)</span>.</li>
<li>The fact that <span class="math inline">\(W_t\)</span> converges almost surely to <span class="math inline">\(W_{∞}\)</span> on <span class="math inline">\(Ω^{(a)}\)</span> means that <span class="math inline">\(\PR(Ω^{(a)} \cap \ALPHABET E) = 0\)</span>.</li>
<li><em>We now restrict attention to integer values of <span class="math inline">\(a\)</span></em>. Since <span class="math inline">\(Ω^{(a)} \cap \ALPHABET E\)</span> is an increasing sequence, we have <span class="math display">\[
\PR(Ω_0 \cap \ALPHABET E)
=
\PR(\lim_{a \to ∞} Ω^{(a)} \cap \ALPHABET E)
=
\lim_{a \to ∞} \PR(Ω^{(a)} \cap \ALPHABET E)
=
0.
\]</span> Hence, <span class="math inline">\(W_t\)</span> converges to <span class="math inline">\(W_{∞}\)</span> almost surely on <span class="math inline">\(Ω_0\)</span>.</li>
</ol>
<!--
Therefore, on the set $\{ τ = ∞ \}$, i.e., the set $\{ \sum_{s = 1}^∞ Y'_s \le a \}$, $\lim_{t \to ∞} W_t$ exists and is finite.

Since $a$ is arbitary, we have that $\lim_{t \to ∞} W_t$ exists and is finite on $\{ \sum_{s=1}^∞ Y'_s < ∞ \}$. But, we know that $Y'_s \le Y_s$. Therefore, for $ω \in Ω_0$, 
$$\sum_{t \ge 1} Y'_t(ω) \le \sum_{t \ge 1} Y_t(ω) < ∞ . $$
Consequently, for $ω \in Ω_0$, $\lim_{t \to ∞} W_t$ exists and is finite.
-->
<p>Now \eqref{eq:almost-supermartingale-st-2} implies that <span class="math display">\[
  \lim_{t \to ∞} \biggl \{ X'_t - \sum_{s=1}^{t-1} (Y'_s - Z'_s) \biggr\} &lt; ∞.
\]</span> Hence, on <span class="math inline">\(Ω_0\)</span>, <span class="math inline">\(\sum_{s=1}^∞ Z'_s &lt; ∞\)</span> and <span class="math inline">\(\lim_{t \to ∞} X'_t\)</span> exists and is finite.</p>
<p>From <a href="#exr-product-sum" class="quarto-xref">Exercise&nbsp;<span>37.1</span></a>, it follows that for <span class="math inline">\(ω \in Ω_0\)</span>, <span class="math inline">\(b_t(ω)\)</span> has a limit. <span class="math display">\[
    X_t = X'_t/b'_t
\]</span> has a limit. Moreover, the inequality, <span class="math display">\[
  Z_t \le Z'_t \prod_{s \ge 1} (1 + β_s)
\]</span> implies that <span class="math inline">\(\sum_{t \ge 1} Z_t &lt; ∞\)</span> for <span class="math inline">\(ω \in Ω_0\)</span>.</p>
</div>
</div>
</div>
<p>The following is a determinisitic version of the above result, taken from <span class="citation" data-cites="Bertsekas2000">Bertsekas and Tsitsiklis (<a href="../references.html#ref-Bertsekas2000" role="doc-biblioref">2000</a>)</span>.</p>
<div id="prp-deterministic-almost-martingale" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 37.3</strong></span> Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span>, <span class="math inline">\(\{Y_t\}_{t \ge 1}\)</span>, and <span class="math inline">\(\{Z_t\}_{t \ge 1}\)</span> be sequences such that <span class="math inline">\(\{Z_t\}_{t \ge 1}\)</span> is nonnegative and the sequences satisfy: <span class="math display">\[
  X_{t+1} \le X_t + Y_t - Z_t
\]</span> and <span class="math inline">\(\sum_{t \ge 1} Y_t &lt; ∞\)</span>. Then, either <span class="math inline">\(X_t \to -∞\)</span> or else <span class="math inline">\(X_t\)</span> converges to a finite value and <span class="math inline">\(\sum_{t \ge 1} Z_t &lt; ∞\)</span>.</p>
</div>
</section>
<section id="convergence-of-submartingales" class="level2" data-number="37.5">
<h2 data-number="37.5" class="anchored" data-anchor-id="convergence-of-submartingales"><span class="header-section-number">37.5</span> Convergence of submartingales</h2>
<div id="thm-krickeberg" class="theorem">
<p><span class="theorem-title"><strong>Theorem 37.3 (Krickeberg decomposition)</strong></span> Let <span class="math inline">\(\{S_t\}_{t \ge 1}\)</span> be a submartingale for which <span class="math inline">\(\sup_t \EXP[S_t^{+}] &lt; ∞\)</span>. Then, there exists a positive martingale <span class="math inline">\(\{M_t\}_{t \ge 1}\)</span> and a positive supermartingale <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> such that <span class="math inline">\(S_t = M_t - X_t\)</span> almost sure for each <span class="math inline">\(t\)</span>.</p>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remark
</div>
</div>
<div class="callout-body-container callout-body">
<p>The finiteness of <span class="math inline">\(\sup_{t} \EXP[ S_{t}^{+}]\)</span> is equivalent to the finiteness of <span class="math inline">\(\sup_{t} \EXP[|S_t|]\)</span> because <span class="math inline">\(|S_t| = 2S_t{+} - (S_t^{+} - S_t^{-})\)</span> and by the submartingale property, <span class="math inline">\(\EXP[S_t^{+} - S_t^{-}] = \EXP[S_t]\)</span> increases with <span class="math inline">\(t\)</span>.</p>
</div>
</div>
<div id="cor-submartingale" class="theorem corollary">
<p><span class="theorem-title"><strong>Corollary 37.1</strong></span> A submartingale with <span class="math inline">\(\sup_{t} \EXP[S_t^{+}] &lt; ∞\)</span> converges almost surely to an integrable limit.</p>
</div>
</section>
<section id="square-integrable-martingales" class="level2" data-number="37.6">
<h2 data-number="37.6" class="anchored" data-anchor-id="square-integrable-martingales"><span class="header-section-number">37.6</span> Square integrable martingales</h2>
<ol type="1">
<li><p>If <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is an integrable sequence adapted to <span class="math inline">\(\{\ALPHABET F_t\}_{t \ge 1}\)</span>. Define the <strong>compensator</strong> <span class="math inline">\(\{ \langle X_t \rangle\}_{t \ge 1}\)</span> as: <span class="math inline">\(\langle X_1 \rangle = 0\)</span> and for <span class="math inline">\(t &gt; 1\)</span>: <span class="math display">\[
  \langle X_t \rangle - \langle X_{t-1} \rangle
  =
\EXP[ X_t \mid \ALPHABET F_{t-1} ] - X_{t-1}.
\]</span> Note that the compensator is predictable and <span class="math inline">\(X_t - \langle X_t \rangle\)</span> is a martingale.</p></li>
<li><p>Now consder a square integrable martingle <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span>. The compensator is given by: <span class="math display">\[
\langle X_t^2 \rangle - \langle X_{t-1}^2 \rangle
=
\EXP[ X_t^2 - X_{t-1}^2 \mid \ALPHABET F_{t-1} ]
=
\EXP[ (X_t - X_{t-1})^2 \mid \ALPHABET F_{t-1} ].
  \]</span> Thus, the compensator <span class="math inline">\(\langle X_t^2 \rangle\)</span> is increasing.</p></li>
<li><p><strong>Convergence of square integrable martinales.</strong> Let <span class="math inline">\(\langle X_{∞} \rangle = \lim_{t \to ∞} \langle X_t \rangle\)</span>. If <span class="math inline">\(\EXP[ \langle X_{∞} \rangle ] &lt; ∞\)</span>, then <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> converges almost surely in the mean-square sense to a random variable <span class="math inline">\(X_{∞}\)</span>.</p></li>
<li><p>Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be a square integrable martingale adapted to <span class="math inline">\(\{\ALPHABET F_t\}_{t \ge 1}\)</span>. Let <span class="math inline">\(τ\)</span> be a stopping time such that <span class="math inline">\(\EXP[ \langle X_{τ} \rangle ] &lt; ∞\)</span>. Then,</p>
<ol type="1">
<li><span class="math inline">\(\EXP[X_{τ} \mid \ALPHABET F_1] = X_1\)</span>.</li>
<li><span class="math inline">\(\EXP[X_{τ}^2 \mid \ALPHABET F_1 ] = \EXP[ \langle M_{τ} \rangle \mid \ALPHABET F_1]\)</span>.</li>
</ol></li>
</ol>
</section>
<section id="strong-law-of-large-number-for-martingale-difference-sequence" class="level2" data-number="37.7">
<h2 data-number="37.7" class="anchored" data-anchor-id="strong-law-of-large-number-for-martingale-difference-sequence"><span class="header-section-number">37.7</span> Strong law of large number for martingale difference sequence</h2>
<p>The following is a generalization of the strong law of large numbers for martingale differences. See <span class="citation" data-cites="Stout1974">Stout (<a href="../references.html#ref-Stout1974" role="doc-biblioref">1974</a>)</span> (Theorem 3.3.1).</p>
<div id="thm-SLLN-MDS" class="theorem">
<p><span class="theorem-title"><strong>Theorem 37.4</strong></span> Suppose <span class="math inline">\(\{M_t\}_{t \ge 1}\)</span> is a martingale difference sequence with respect to the filtration <span class="math inline">\(\{\ALPHABET F_t\}_{t \ge 1}\)</span>. Let <span class="math inline">\(\{a_t\}_{t \ge 1}\)</span> be positive sequence that is <span class="math inline">\(\{\ALPHABET F_t\}_{t \ge 1}\)</span> predictable and <span class="math inline">\(\lim_{t \to ∞} a_t = ∞\)</span>.</p>
<p>If for some <span class="math inline">\(p \in (0,2]\)</span>, we have <span class="math display">\[
  \sum_{t=1}^∞ \EXP \biggl[ \frac{|M_t|^p}{a_t^p} \biggm|
  \ALPHABET F_{t-1} \biggr] &lt; ∞,
\]</span> then <span class="math display">\[
  \sum_{t=1}^∞ \frac{M_t}{a_t} = 0, \quad a.s.
\]</span></p>
</div>
</section>
<section id="exercises" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="exercises">Exercises</h2>
<div id="exr-product-sum" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 37.1</strong></span> The purpose of this exercise is to establish the following: For a sequence of nonnegative real numbers <span class="math inline">\(\{a_t\}_{t \ge 1}\)</span> <span class="math display">\[\sum_{t \ge 1} a_t &lt; ∞  \iff
\prod_{t \ge 1} (1 + a_t) \text{ converges to a finite non-zero limit}.
\]</span></p>
<ol type="1">
<li><p>Show that <span class="math inline">\(\sum_{t \ge 1}a_t \le \prod_{t \ge 1}(1 + a_t)\)</span>.</p>
<p><em>Hint</em>: Expand the right hand side.</p></li>
<li><p>Show that <span class="math inline">\(\prod_{t \ge 1}(1 + a_t) \le \exp\Bigl(\sum_{t \ge 1} a_t\Bigr)\)</span>.</p>
<p><em>Hint</em>: Use Taylor series expansion of <span class="math inline">\(e^x\)</span>.</p></li>
</ol>
</div>
<div id="exr-Kronecker-lemma" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 37.2</strong></span> <strong>(Kronecker’s Lemma)</strong> This result is useful intermediate step for showing convergence of various iterative algorithms.</p>
<p>Suppose <span class="math inline">\(\{a_t\}_{t \ge 1}\)</span> is a strictly positive increasing real sequence which diverges to <span class="math inline">\(∞\)</span> and <span class="math inline">\(\{x_t\}_{t \ge 1}\)</span> is a real sequence such that the series <span class="math inline">\(\sum_{t=1}^∞ x_t/a_t\)</span> converges. Then, <span class="math display">\[
  \lim_{T \to ∞} \frac 1{a_T} \sum_{t=1}^T x_t = 0.
\]</span></p>
</div>
<div id="exr-martingale-Robbins-Monroe" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 37.3</strong></span> Consider a sequence <span class="math inline">\(\{α_t\}_{t \ge 1}\)</span> adapted to <span class="math inline">\(\{\mathcal F_t\}\)</span> such that <span class="math display">\[
  \sum_{t=1}^{∞} α_t = \infty
  \quad\text{and}\quad
  \sum_{t=1}^{∞} α_t^2 &lt; ∞.
  \]</span> Now suppose <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> is an adapted sequence of square integrable random variables such that <span class="math display">\[
    \EXP[ X_{t+1} | \mathcal F_t ] = 0
    \quad\text{and}\quad
    \EXP[ \| X_{t+1}\|_2^2 \mid \mathcal F_t ] \le B
  \]</span> where <span class="math inline">\(B\)</span> is a deterministic constant. Then <span class="math display">\[
    \sum_{t=1}^T α_t X_{t+1}
    \quad\text{and}\quad
    \sum_{t=1}^T α_t^2 \| X_t\|_2^2,
    \quad
    T = 1,2, \dots
  \]</span> converge to finite limits almost surely.</p>
</div>
<div id="exr-alt-almost-supermartingale" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 37.4 (Generalization of <a href="#thm-almost-supermartingale" class="quarto-xref">Theorem&nbsp;<span>37.2</span></a>)</strong></span> Suppose <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span>, <span class="math inline">\(\{a_t\}_{t \ge 1}\)</span>, <span class="math inline">\(\{Y_t\}_{t \ge 1}\)</span> be nonnegative processes which are adapted to some filtration <span class="math inline">\(\{\ALPHABET F_t\}_{t \ge 1}\)</span> such that <span class="math display">\[
  \EXP[X_{t+1} \mid \ALPHABET F_t] \le a_t X_t + Y_t.
\]</span> Define the set <span class="math inline">\(Ω_0\)</span> by <span class="math display">\[
  Ω_0 = \biggl\{ ω : \prod_{t \ge 1} a_t(\omega) &lt; ∞  \biggr\}
  \cap
  \biggl\{ ω : \sum_{t \ge 1} Y_t(ω) &lt; ∞ \biggr\}
\]</span> Then, show that for all <span class="math inline">\(ω \in Ω_0\)</span>, we have that <span class="math inline">\(\lim_{t \to ∞} X_t(ω)\)</span> exists and is finite.</p>
</div>
<div id="exr-vec-almost-supermartingale" class="theorem exercise page-columns page-full">
<p><span class="theorem-title"><strong>Exercise 37.5 (Vector generalization of <a href="#thm-almost-supermartingale" class="quarto-xref">Theorem&nbsp;<span>37.2</span></a>)</strong></span> In all the discussion of almost supermartingale results so far, we have assumed that the processes were scalar valued. Now consider the case where <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> and <span class="math inline">\(\{Y_t\}_{t \ge 1}\)</span> are processes in <span class="math inline">\(\reals_{\ge 0}^n\)</span> and <span class="math inline">\(\{A_t\}_{t \ge 1}\)</span> is a process in <span class="math inline">\(\reals_{\ge 0}\)</span>, all adapted to a filteration <span class="math inline">\(\{\ALPHABET F_t\}_{t \ge 1}\)</span> such that <span class="math display">\[
  \EXP[X_{t+1} \mid \ALPHABET F_t] \le A_t X_t + Y_t.
\]</span></p>
<p>Assume that for all <span class="math inline">\(t\)</span>, the matrix <span class="math inline">\(A_t\)</span> is of the form <span class="math inline">\(P_t D_t\)</span>, where <span class="math inline">\(P_t\)</span> is a permutation matrix and <span class="math inline">\(D_t\)</span> is a diagonal matrix with all positive elements.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="no-row-height column-margin column-container"><p><sup>1</sup>&nbsp;Such matrices are called <a href="https://en.wikipedia.org/wiki/Generalized_permutation_matrix">:positive monomial matrices</a> and have the property that they are invertible and all entries of the inverse are non-negative.</p></div><p>Define the set <span class="math inline">\(Ω_0\)</span> by <span class="math display">\[
  Ω_0 = \biggl\{ ω : \prod_{t \ge 1} A_t(\omega) &lt; ∞ \biggr\}
  \cap
  \biggl\{ ω : \sum_{t \ge 1} Y_t(ω) &lt; ∞ \biggr\}
\]</span> Then, show that for all <span class="math inline">\(ω \in Ω_0\)</span>, we have that <span class="math inline">\(\lim_{t \to ∞} X_t(ω)\)</span> exists and is finite.</p>
</div>
<div id="exr-delayed-almost-supermartingales" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 37.6 (Delayed almost supermartingales)</strong></span> Suppose <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span>, <span class="math inline">\(\{β_t\}_{t \ge 1}\)</span>, and <span class="math inline">\(\{Y_t\}_{t \ge 1}\)</span> be nonnegative processes which are adapted to some filteration <span class="math inline">\(\{\ALPHABET F_t\}_{t \ge 1}\)</span> such that <span class="math display">\[
  \EXP[ X_{t+1} \mid \ALPHABET F_t] \le (1 + β_t) X_{t-d} + Y_t,
\]</span> where <span class="math inline">\(d \in \integers_{\ge 0}\)</span> is a constant. Define the set <span class="math inline">\(Ω_0\)</span> by <span class="math display">\[
  Ω_0 = \biggl\{ ω : \sum_{t \ge 1} β_t(\omega) &lt; ∞ \biggr\}
  \cap
  \biggl\{ ω : \sum_{t \ge 1} Y_t(ω) &lt; ∞ \biggr\}
\]</span> Then, show that for all <span class="math inline">\(ω \in Ω_0\)</span>, we have that <span class="math inline">\(\lim_{t \to ∞} X_t(ω)\)</span> exists and is finite.</p>
<p><em>Hint:</em> Write the dynamics equation in vector form and use <a href="#exr-vec-almost-supermartingale" class="quarto-xref">Exercise&nbsp;<span>37.5</span></a></p>
</div>
<div id="exr-SLLN-martingales" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 37.7</strong></span> Let <span class="math inline">\(\{X_t\}_{t \ge 1}\)</span> be square integrable martingale with <span class="math inline">\(\EXP[ X_T^2 ] \le T\)</span> for all <span class="math inline">\(T\)</span>. Prove that <span class="math inline">\(X_T/T \to 0\)</span>, a.s.</p>
<p>[This may be viewed as a generalization of a SLLN for i.i.d.&nbsp;sequences.]</p>
<p><em>Hint:</em> Use <a href="../mdps/monotone-mdps.html#abel-lemma">Abel’s lemma</a> to show <span class="math inline">\(\sum_{t=1}^T \EXP[ M_t^2 ]/t^2 &lt; ∞\)</span> and then use <a href="#thm-SLLN-MDS" class="quarto-xref">Theorem&nbsp;<span>37.4</span></a>.</p>
</div>
</section>
<section id="notes" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="notes">Notes</h2>
<p>The material in the introduction is taken from <span class="citation" data-cites="Pollard2002">Pollard (<a href="../references.html#ref-Pollard2002" role="doc-biblioref">2002</a>)</span>, <span class="citation" data-cites="Chang2007">Chang (<a href="../references.html#ref-Chang2007" role="doc-biblioref">2007</a>)</span>, and <span class="citation" data-cites="Dellacherie1982b">Dellacherie and Meyer (<a href="../references.html#ref-Dellacherie1982b" role="doc-biblioref">1982</a>)</span>. The latter is an excellent reference for this material.</p>
<p><a href="#thm-almost-supermartingale" class="quarto-xref">Theorem&nbsp;<span>37.2</span></a> and its proof is adapted from <span class="citation" data-cites="Robbins1971">Robbins and Siegmund (<a href="../references.html#ref-Robbins1971" role="doc-biblioref">1971</a>)</span> and <a href="https://mathoverflow.net/a/357922/520224">this post on math stackexchange</a>. A version of <a href="#thm-almost-supermartingale" class="quarto-xref">Theorem&nbsp;<span>37.2</span></a> with <span class="math inline">\(Z_t = 0\)</span> is stated as Exercise II-4 of <span class="citation" data-cites="Neveu1975">Neveu (<a href="../references.html#ref-Neveu1975" role="doc-biblioref">1975</a>)</span>.</p>
<p><a href="#exr-martingale-Robbins-Monroe" class="quarto-xref">Exercise&nbsp;<span>37.3</span></a> is from <span class="citation" data-cites="Bertsekas2000">Bertsekas and Tsitsiklis (<a href="../references.html#ref-Bertsekas2000" role="doc-biblioref">2000</a>)</span>. <a href="#exr-vec-almost-supermartingale" class="quarto-xref">Exercise&nbsp;<span>37.5</span></a> is from <span class="citation" data-cites="Mahajan:cdc2024a">Mahajan et al. (<a href="../references.html#ref-Mahajan:cdc2024a" role="doc-biblioref">2024</a>)</span>, which provides other vector generalizations of <a href="#thm-almost-supermartingale" class="quarto-xref">Theorem&nbsp;<span>37.2</span></a> as well.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-Bertsekas2000" class="csl-entry" role="listitem">
<span class="smallcaps">Bertsekas, D.P. and Tsitsiklis, J.N.</span> 2000. Gradient convergence in gradient methods with errors. <em><span>SIAM</span> Journal on Optimization</em> <em>10</em>, 3, 627–642. DOI: <a href="https://doi.org/10.1137/s1052623497331063">10.1137/s1052623497331063</a>.
</div>
<div id="ref-Bogdan2022" class="csl-entry" role="listitem">
<span class="smallcaps">Bogdan, K. and Więcek, M.</span> 2022. Burkholder inequality by bregman divergence.
</div>
<div id="ref-Burkholder1966" class="csl-entry" role="listitem">
<span class="smallcaps">Burkholder, D.L.</span> 1966. Martingale transforms. <em>The Annals of Mathematical Statistics</em> <em>37</em>, 6, 1494–1504. DOI: <a href="https://doi.org/10.1214/aoms/1177699141">10.1214/aoms/1177699141</a>.
</div>
<div id="ref-Chang2007" class="csl-entry" role="listitem">
<span class="smallcaps">Chang, J.T.</span> 2007. Stochastic processes. Available at: <a href="http://www.stat.yale.edu/~pollard/Courses/251.spring2013/Handouts/Chang-notes.pdf">http://www.stat.yale.edu/~pollard/Courses/251.spring2013/Handouts/Chang-notes.pdf</a>.
</div>
<div id="ref-Dellacherie1982b" class="csl-entry" role="listitem">
<span class="smallcaps">Dellacherie, C. and Meyer, P.-A.</span> 1982. <em>Probabilities and potential <span>B</span>: Theory of martingales</em>. North-Holland Mathematical Studies.
</div>
<div id="ref-Geiss2021" class="csl-entry" role="listitem">
<span class="smallcaps">Geiss, S. and Scheutzow, M.</span> 2021. Sharpness of <span class="nocase">Lenglart’s</span> domination inequality and a sharp monotone version. <em>Electronic Communications in Probability</em> <em>26</em>, none, 1–8. DOI: <a href="https://doi.org/10.1214/21-ECP413">10.1214/21-ECP413</a>.
</div>
<div id="ref-Lenglart1977" class="csl-entry" role="listitem">
<span class="smallcaps">Lenglart, É.</span> 1977. Relation de domination entre deux processus. <em>Annales de l’institut henri poincar<span>é</span>. Section b. Calcul des probabilit<span>é</span>s et statistiques</em>, 171–179.
</div>
<div id="ref-Mahajan:cdc2024a" class="csl-entry" role="listitem">
<span class="smallcaps">Mahajan, A., Niculescu, S.-I., and Vidyasagar, M.</span> 2024. A vector almost-sure supermartingale theorem and its applications. In: <em>Submitted to IEEE conference on decision and control</em>. IEEE.
</div>
<div id="ref-Neveu1975" class="csl-entry" role="listitem">
<span class="smallcaps">Neveu, J.</span> 1975. <em>Discrete parameter martingales</em>. North Holland.
</div>
<div id="ref-Pollard2002" class="csl-entry" role="listitem">
<span class="smallcaps">Pollard, D.</span> 2002. <em>A user’s guide to measure theoretic probability</em>. Cambridge University Press.
</div>
<div id="ref-Robbins1971" class="csl-entry" role="listitem">
<span class="smallcaps">Robbins, H. and Siegmund, D.</span> 1971. A convergence theorem for non-negative almost supermartingales and some applications. In: <em>Optimizing methods in statistics</em>. Elsevier, 233–257. DOI: <a href="https://doi.org/10.1016/b978-0-12-604550-5.50015-8">10.1016/b978-0-12-604550-5.50015-8</a>.
</div>
<div id="ref-Stout1974" class="csl-entry" role="listitem">
<span class="smallcaps">Stout, W.F.</span> 1974. <em>Almost sure convergence</em>. Academic Press.
</div>
</div>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../probability/markov-chains.html" class="pagination-link" aria-label="Markov chains">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Markov chains</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../probability/stochastic-stability.html" class="pagination-link" aria-label="Stochastic stability">
        <span class="nav-page-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Stochastic stability</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/adityam/stochastic-control/edit/quarto/probability/martingales.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer><script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>